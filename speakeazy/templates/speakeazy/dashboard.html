{% extends "base.html" %}
{% load static from staticfiles %}{% load i18n %}
{% block title %} - Dashboard{% endblock %}

{% block breadcrumbs %}
    <li class="uk-active"><span>dashboard</span></li>
{% endblock %}

{% block content %}
    <div id="dashboard" class="">
        <div id="upcoming-projects" class="uk-block">
            <h4>Welcome! Create a new project to start preparing for your next presentation.</h4>

            <div class="home-dashboard-flex-box">
                <h2 class="home-dashboard-header">Projects</h2>
                <a class="home-dashboard-button" href="{% url 'projects:projectList' %}">See all</a>
                <a class="home-dashboard-button" href="{% url 'projects:newProject' %}">Create New</a>
            </div>

            {% if project_recent_list %}
                <h3>Recent</h3>

                <div class="uk-flex uk-grid">
                    {% for project in project_recent_list %}
                        <div class="uk-width-small-1-3 uk-width-medium-1-4 uk-width-large-1-6">
                            <a href="{% url 'projects:project:projectView' project.slug %}"
                               class="uk-panel uk-panel-box panel-card uk-panel-header">

                                <h3 class="uk-panel-title">{{ project.name }}</h3>

                                <div class="item-info">
                                    <div class="project-due-date">Due: {{ project.due_date | date:"D, d M Y" }}</div>
                                    <div class="project-recording-count">{{ project.recording_set.all | length }}</div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}

            {% if project_due_list %}
                <h3>Due Soon</h3>

                <div class="uk-flex uk-grid">
                    {% for project in project_due_list %}
                        <div class="uk-width-small-1-3 uk-width-medium-1-4 uk-width-large-1-6">
                            <a href="{% url 'projects:project:projectView' project.slug %}"
                               class="uk-panel uk-panel-box panel-card uk-panel-header">

                                <h3 class="uk-panel-title">{{ project.name }}</h3>

                                <div class="item-info">
                                    <div class="project-due-date">Due: {{ project.due_date | date:"D, d M Y" }}</div>
                                    <div class="project-recording-count">{{ project.recording_set.all | length }}</div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>


        <div id="recent-recordings" class="uk-block">
            <h2 class="home-dashboard-button">Recent Recordings</h2>

            <div class="uk-flex uk-grid">
                {% for recording in recording_list %}
                    <div class="uk-width-small-1-3 uk-width-medium-1-4 uk-width-large-1-6">
                        <a class=""
                           href="{% url 'projects:project:recordingView' recording.project.slug recording.slug %}">

                            <figure class="uk-overlay uk-overlay-hover">
                                <video class="" src="{{ recording.thumbnail_video.url }}"
                                       poster="{{ recording.thumbnail_image.url }}" loop></video>
                                <figcaption
                                        class="uk-overlay-panel uk-overlay-background uk-overlay-bottom uk-overlay-slide-bottom">
                                    {{ recording.project.name }} - {{ recording.slug }}
                                </figcaption>
                            </figure>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>

        <div id="Groups" class="uk-block">

            <div class="home-dashboard-flex-box">
                <h2 class="home-dashboard-header">Groups</h2>
                <a class="home-dashboard-button" href="{% url 'groups:groupDashboard' %}">See all</a>
            </div>

            <div class="uk-flex uk-grid">
                {% for group in group_list %}
                    <div class="uk-width-small-1-3 uk-width-medium-1-4 uk-width-large-1-6">
                        <a href="{% url 'groups:group:groupView' group.slug %}"
                           class="uk-panel uk-panel-box panel-card uk-panel-header">

                            <h3 class="uk-panel-title">{{ group.name }}</h3>

                            <div class="item-info">
                                <div>{{ group.description }}</div>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>

    </div>
{% endblock %}


{% block jquery %}
    <script src="{% static 'js/home.js' %}"></script>
{% endblock %}
