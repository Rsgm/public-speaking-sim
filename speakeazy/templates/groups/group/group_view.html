{% extends "base.html" %}
{% load static from staticfiles %}{% load i18n %}
{% block title %} - {{ group.name }}{% endblock %}


{% block breadcrumbs %}
    {% include "groups/breadcrumb.html" %}
    <li><span>g</span></li>
    <li><span>{{ group.slug }}</span></li>
{% endblock %}


{% block content %}
    <div class="uk-block">
        <h1>{{ group.name }} Home</h1>

        {% if group.logo %}
            <img src="{{ group.logo.url }}">
        {% endif %}

        {% if submission_list %}
            <h2><a href={% url 'groups:group:submission:list' group.slug %}></a>Submissions</h2>

            <div class="uk-flex uk-grid">
                {% for submission in submission_list %}
                    <div class="uk-width-small-1-3 uk-width-medium-1-4 uk-width-large-1-6">
                        <a href="{% url 'groups:group:submission:evaluate' group.slug submission.pk %}"
                           class="uk-panel uk-panel-box uk-panel-header">

                            <h3 class="uk-panel-title">{{ submission.created_time }}</h3>

                            <div class="item-info">
                                <div>{{ submission.state }}</div>
                                <div>{{ submission.recording.project.user.username }}</div>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% endif %}


        {% if invite_list %}
            <h2><a href={% url 'groups:group:invite:list' group.slug %}></a>Invites</h2>

            <a href="{% url 'groups:group:invite:add' group.slug %}">Create Invite</a>

            <div class="uk-flex uk-grid">
                {% for invite in invite_list %}
                    <div class="uk-width-small-1-3 uk-width-medium-1-4 uk-width-large-1-6">
                        <a href="{% url 'groups:group:invite:view' group.slug invite.slug %}"
                           class="uk-panel uk-panel-box uk-panel-header">

                            <h3 class="uk-panel-title">{{ invite.name }}</h3>

                            <div class="item-info">
                                <div>Created: {{ invite.created_time }}</div>
                                {% if invite.uses %}
                                    <div>Uses left: {{ invite.uses }}</div>{% endif %}
                                {% if invite.expires %}
                                    <div>Expires: {{ invite.expires }}</div>{% endif %}
                                <div>Token: {{ invite.token }}</div>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% endif %}


        {% if user_list %}
            <h2><a href={% url 'groups:group:user:list' group.slug %}></a>Users</h2>

            <div class="uk-flex uk-grid">
                {% for user in user_list %}
                    <div class="uk-width-small-1-3 uk-width-medium-1-4 uk-width-large-1-6">
                        <a href="{% url 'groups:group:user:view' group.slug user.user %}"
                           class="uk-panel uk-panel-box uk-panel-header">

                            <h3 class="uk-panel-title">{{ user.user.username }}</h3>

                            <div class="item-info">
                                <div>Added: {{ user.created_time }}</div>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% endif %}

    </div>

{% endblock %}
